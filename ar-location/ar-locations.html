<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL =
            "https://raw.githack.com/jeromeetienne/ar.js/master/three.js/";
    </script>
</head>

<body style="margin: 0; overflow: hidden">
    <a-scene cursor="rayOrigin: mouse; fuse: true; fuseTimeout: 0;" raycaster="objects: [gps-entity-place];"
        vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false" htmlembed>
        <a-camera gps-camera="minDistance: 1; maxDistance: 10000;" rotation-reader></a-camera>
    </a-scene>
    <script>
        // Sample store data
        const allStore = {
            "1": {
                "strategy": "1",
                "storename": "Popeyes",
                "address": "Lulu Mall, R04, Second Floor Global Malls, Gopalpura, Bengaluru, Karnataka 560023",
                "phone": "1800 309 1234",
                "lat": "12.98166282",
                "lon": "77.56365007"
            },
            "2": {
                "strategy": "2",
                "storename": "Popeyes",
                "address": "Chandra Layout, Ground Floor - 99, 60 Feet Road, Chandra Layout Main Rd, Govindaraja Nagar Ward, Bengaluru, Karnataka 560040",
                "phone": "1800 309 1234",
                "lat": "12.96111919",
                "lon": "77.52759274"
            },
            "3": {
                "strategy": "3",
                "storename": "Popeyes",
                "address": "Ground and First Floor, 333, 3rd Stage 4th Block, Basaveshwar Nagar, Bengaluru, Karnataka 560079",
                "phone": "1800 309 1234",
                "lat": "12.99287476",
                "lon": "77.53865876"
            },
            "4": {
                "strategy": "4",
                "storename": "Popeyes",
                "address": "Ground Floor, 367, 80 Feet Rd, Judges Colony, AK Colony, RT Nagar, Bengaluru, Karnataka 560032",
                "phone": "1800 309 1234",
                "lat": "13.02398382",
                "lon": "77.59262947"
            },
            "5": {
                "strategy": "5",
                "storename": "Popeyes",
                "address": "Municipal Corporation No 10, PID No 100-731-10, KC Tower ITI & HB Society, New BEL Rd, Bengaluru, Karnataka 560054",
                "phone": "1800 309 1234",
                "lat": "13.03284068",
                "lon": "77.56967718"
            }
        };


        window.onload = () => {
            const scene = document.querySelector("a-scene");

            for (const key in allStore) {
                const store = allStore[key];
                const latitude = store.lat;
                const longitude = store.lon;

                // Create an entity for the GPS place
                const placeEntity = document.createElement("a-entity");
                placeEntity.setAttribute("gps-entity-place", `latitude: ${latitude}; longitude: ${longitude};`);

                // Create plane entity
                const placePlane = document.createElement("a-plane");
                placePlane.setAttribute("width", "7");
                placePlane.setAttribute("height", "3");
                placePlane.setAttribute("color", "#4CC3D9");
                placePlane.setAttribute("scale", "10 10 10");

                // Create text entity
                const placeText = document.createElement("a-text");
                placeText.setAttribute("align", "center");
                placeText.setAttribute("color", "#000");
                placeText.setAttribute("position", "0 0 0.1"); // Adjusted Z position
                placeText.setAttribute("scale", "2 2 1"); // Adjusted scale
                placeText.setAttribute("value", `${store.storename}`);

                // Append text to plane
                placePlane.appendChild(placeText);

                // Append plane to entity
                placeEntity.appendChild(placePlane);

                // Append entity to scene
                scene.appendChild(placeEntity);
            }
        };
    </script>
</body>

</html>