<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL =
            "https://raw.githack.com/jeromeetienne/ar.js/master/three.js/";
    </script>
</head>

<body style="margin: 0; overflow: hidden">
    <a-scene cursor="rayOrigin: mouse; fuse: true; fuseTimeout: 0;" raycaster="objects: [gps-projected-entity-place];"
        vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false" htmlembed>
        <a-camera gps-camera="minDistance: 20;" rotation-reader></a-camera>
    </a-scene>
    <script>
        // Getting places from APIs
        const allStore = {
            "1": {
                "strategy": "1",
                "storename": "T2 - Fitzroy",
                "address": "340 Brunswick St  Fitzroy VIC 3065 AU",
                "lat": "-37.7971222",
                "lon": "144.978804"
            },
            "2": {
                "strategy": "2",
                "storename": "T2 - Melbourne Central",
                "address": "Shop GD 049, Melbourne Central 300 Lonsdale St Melbourne VIC 3000 AU",
                "lat": "-37.8110885",
                "lon": "144.963389"
            },
            "3": {
                "strategy": "3",
                "storename": "T2 - Highpoint",
                "address": "Shop L02 2064a, Highpoint 200 Rosamond Rd Maribrynong VIC 3032 AU",
                "lat": "-37.7726211",
                "lon": "144.8890687"
            },
            "4": {
                "strategy": "4",
                "storename": "T2 - 269 Little Collins",
                "address": "269 Little Collins St  Melbourne VIC 3000 AU",
                "lat": "-37.8161376",
                "lon": "144.961219"
            },
            "5": {
                "strategy": "5",
                "storename": "T2 - Camberwell",
                "address": "596 Burke Rd  Camberwell VIC 3124 AU",
                "lat": "-37.830232",
                "lon": "145.0570221"
            },
            "6": {
                "strategy": "6",
                "storename": "T2 - Emporium",
                "address": "Shop 1-030, Emporium 287 Lonsdale St Melbourne VIC 3000 AU",
                "lat": "-37.8117317",
                "lon": "144.9635419"
            },
            "7": {
                "strategy": "7",
                "storename": "T2 - Geelong",
                "address": "Shop 103a, Westfield Geelong 95 Malop St Geelong VIC 3220 AU",
                "lat": "-38.1474326",
                "lon": "144.3622374"
            },
            "8": {
                "strategy": "8",
                "storename": "T2 - Chadstone",
                "address": "Shop 140B, Chadstone 1341 Dandenong Rd Chadstone VIC 3148 AU",
                "lat": "-37.8865831",
                "lon": "145.0824121"
            },
            "9": {
                "strategy": "9",
                "storename": "T2 - The Glen",
                "address": "Unit G-072 The Glen Shopping Centre  Springvale Road 3150 Glen Waverley  VIC 3150 AU",
                "lat": "-37.8762186",
                "lon": "145.1652513"
            },
            "10": {
                "strategy": "10",
                "storename": "T2 - Doncaster",
                "address": "Shop 1134, Westfield Doncaster 619 Doncaster Rd Doncaster VIC 3108 AU",
                "lat": "-37.7854967",
                "lon": "145.1261628"
            },
        }
        console.log(allStore);

        window.onload = () => {
            const scene = document.querySelector("a-scene");

            for (const key in allStore) {
                const store = allStore[key];
                const latitude = store.lat;
                const longitude = store.lon;

                // Create an entity for the plane and text
                const placeEntity = document.createElement("a-entity");
                placeEntity.setAttribute(
                    "gps-entity-place",
                    `latitude: ${latitude}; longitude: ${longitude};`
                );

                // Create plane entity
                const placePlane = document.createElement("a-plane");
                placePlane.setAttribute("width", "7");
                placePlane.setAttribute("height", "3");
                placePlane.setAttribute("position", "0 0 0");
                placePlane.setAttribute("rotation", "0 0 0");
                placePlane.setAttribute("color", "#4CC3D9");
                placePlane.setAttribute("scale", "10 10 10");

                // Create text entity
                const placeText = document.createElement("a-text");
                placeText.setAttribute("align", "center");
                placeText.setAttribute("color", "#000");
                placeText.setAttribute("position", "0 0 0.1"); // Adjusted Z position
                placeText.setAttribute("scale", "2 2 1"); // Adjusted scale
                placeText.setAttribute("value", `${store.storename}`);

                // Append text to plane
                placePlane.appendChild(placeText);

                // Append plane to entity
                placeEntity.appendChild(placePlane);

                // Append entity to scene
                scene.appendChild(placeEntity);

            }
        };

    </script>
</body>

</html>